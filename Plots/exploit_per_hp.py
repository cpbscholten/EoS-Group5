import matplotlib.pyplot as plt
import csv
from operator import itemgetter

first_line = True

hps = {}

with open('dataset.csv') as csv_file:
    csv_reader = csv.reader(csv_file, delimiter=',')
    line_count = 0
    for row in csv_reader:
        if first_line:
            first_line = False
            pass
        else:
            try:
                if(row[8][0] == 'A' and row[8][1] == 'S'):
                    hp = row[8][8:]
                else: 
                    hp = row[8]
                if hp in hps:
                    hps[hp] += 1
                else:
                    hps[hp] = 1
            except:
                pass

ordered_hps = {k: v for k, v in sorted(hps.items(), key=lambda item: item[1])}

hps_list = list(map(list, ordered_hps.items()))[-10:]

print(hps_list)

plt.pie([item[1] for item in hps_list], autopct="%0.0f%%")#, labels=[item[1] for item in sorted_list], autopct="%0.0f%%")
plt.legend([item[0] for item in hps_list],bbox_to_anchor=(0.50,1.059), loc="upper center", ncol=3, fontsize='xx-small')
plt.show()